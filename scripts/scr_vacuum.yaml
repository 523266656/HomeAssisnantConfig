#################################################
# Scripts for vacuum cleaning
#################################################

start_vacuum_room:
  alias: 'Clean Selected Room [Mi Robot]'
  sequence:
#      - service: script.turn_on
#        data_template:
#          entity_id: >-
#            {% if is_state("input_select.vacuum_power", "Quiet") %}
#              script.set_vacuum_power_quiet
#            {% elif is_state("input_select.vacuum_power", "Balanced") %}
#              script.set_vacuum_power_balanced
#            {% elif is_state("input_select.vacuum_power", "Turbo") %}
#              script.set_vacuum_power_turbo
#            {% elif is_state("input_select.vacuum_power", "Max") %}
#              script.set_vacuum_power_max
#            {% endif %}
      - service: script.turn_on
        data_template:
          entity_id: >-
            {% if is_state("input_select.room_to_vacuum", "Прихожая") %}
              script.start_vacuum_hallway
            {% elif is_state("input_select.room_to_vacuum", "Детская") %}
              script.start_vacuum_nursery
            {% elif is_state("input_select.room_to_vacuum", "Гостинная") %}
              script.start_vacuum_living_room
            {% elif is_state("input_select.room_to_vacuum", "Кухня") %}
              script.start_vacuum_kitchen
            {% elif is_state("input_select.room_to_vacuum", "Спальня") %}
              script.start_vacuum_bedroom
            {% endif %}

start_vacuum_hallway_by_door_sensor:
  alias: 'Clean Hallway by Door Sensor [Mi Robot]'
  sequence:
    - delay:
        minutes: 8
    - service: vacuum.set_fan_speed
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        fan_speed: Standard
    - service: script.turn_on
      data:
        entity_id: script.start_vacuum_hallway

start_vacuum_hallway:
  alias: 'Clean Hallway [Mi Robot]'
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: app_segment_clean
        params: [17]

start_vacuum_nursery:
  alias: 'Clean Nursery [Mi Robot]'
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: app_segment_clean
        params: [19]

start_vacuum_living_room:
  alias: 'Clean Living Room [Mi Robot]'
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: app_segment_clean
        params: [16]

start_vacuum_kitchen:
  alias: 'Clean Kitchen [Mi Robot]'
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: app_segment_clean
        params: [18]

start_vacuum_bedroom:
  alias: 'Clean Bedroom [Mi Robot]'
  sequence:
    - service: vacuum.send_command
      data:
        entity_id: vacuum.xiaomi_vacuum_cleaner
        command: app_segment_clean
        params: [20]

set_vacuum_power_silent:
  sequence:
    service: vacuum.set_fan_speed
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      fan_speed: Silent

set_vacuum_power_standard:
  sequence:
    service: vacuum.set_fan_speed
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      fan_speed: Standard

set_vacuum_power_medium:
  sequence:
    service: vacuum.set_fan_speed
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      fan_speed: Medium

set_vacuum_power_turbo:
  sequence:
    service: vacuum.set_fan_speed
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      fan_speed: Turbo

set_vacuum_power_gentle:
  sequence:
    service: vacuum.set_fan_speed
    data:
      entity_id: vacuum.xiaomi_vacuum_cleaner
      fan_speed: Gentle